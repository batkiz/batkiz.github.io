<!doctype html><html lang=zh><head><meta name=viewport content="width=device-width,initial-scale=1"><title>在 powershell 中无缝调用 wsl 中的 neovim</title>
<meta charset=utf-8><meta name=description content="Ladder@
注 1：neovim 亦可换为 vim


注 2：最新版本的 pwsh 脚本请点此获取

在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。"><meta name=author content="map[email:batkiz@outlook.com name:Jinglue]"><link rel=canonical href=https://blog.batkiz.com/posts/using-wsl-nvim-in-powershell/><link rel=alternate type=application/rss+xml href=https://blog.batkiz.com//index.xml title="not b@tk1z"><meta property="og:url" content="https://blog.batkiz.com/posts/using-wsl-nvim-in-powershell/"><meta property="og:site_name" content="not b@tk1z"><meta property="og:title" content="在 powershell 中无缝调用 wsl 中的 neovim"><meta property="og:description" content="注 1：neovim 亦可换为 vim
注 2：最新版本的 pwsh 脚本请点此获取
在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-11-30T16:04:34+08:00"><meta property="article:modified_time" content="2019-11-30T16:04:34+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="在 powershell 中无缝调用 wsl 中的 neovim"><meta name=twitter:description content="注 1：neovim 亦可换为 vim
注 2：最新版本的 pwsh 脚本请点此获取
在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"在 powershell 中无缝调用 wsl 中的 neovim","item":"https://blog.batkiz.com/posts/using-wsl-nvim-in-powershell/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"在 powershell 中无缝调用 wsl 中的 neovim","name":"在 powershell 中无缝调用 wsl 中的 neovim","description":" 注 1：neovim 亦可换为 vim\n注 2：最新版本的 pwsh 脚本请点此获取\n在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。\n","keywords":[],"articleBody":" 注 1：neovim 亦可换为 vim\n注 2：最新版本的 pwsh 脚本请点此获取\n在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。\n不可否认，zsh/bash/fish 等 Linux 下的终端非常便捷好用，但我也是非常喜欢 powershell 的。在 之前的文章 中，我对 powershell 进行了很多自定义配置，我也越来越离不开 powershell 了。\n既然在我的 wsl 中我已经配好了 neovim，如果我再在 Windows 之上配置一份，无疑是多此一举。\n那么该如何无缝调用呢？\n主要问题 使用 wsl nvim filename 的话过于啰嗦 Windows 中如果使用自动补全路径，文件路径使用的 \\，neovim 会将其识别为文件名的一部分 解决方案 话不多说，来看代码：\nfunction vim { param($fileName = '.') wsl -e nvim $filename.Replace('\\','/').Replace('C:','/mnt/c') } 将上面的代码写入 powershell 的配置文件保存（notepad.exe $PROFILE），之后新开一个 powershell 终端，就能无缝体验啦。\n对代码的解释 下面是解释。\n第一行的 function vim 可以视为 Linux 之中的 alias，让我们每次在 powershell 中输入 vim 时，自动转换为下面的命令。\n第二行的 param($fileName = '.') 则定义了 vim 所接收的参数，即要编辑的文件名。当未传入参数时，默认传入当前目录。\n第三行的 wsl -e nvim $filename.Replace('\\','/') 则是真正起作用的代码。$filename.Replace('\\','/') 将 \\ 全部替换为 /，让 wsl 中的 neovim 能够识别我们真正要编辑的文件。wsl -e nvim 则是调用 wsl 中的 neovim 的命令，感兴趣的读者还可阅读 wsl --help 来查看更多用法。\n仍存在的问题 对所要编辑的文件只能使用相对路径，而不能是绝对路径[solved] 通过 .Replace('C:','/mnt/c') 将 C 盘的绝对路径转为 wsl 中的相对路径，可实现对绝对路径文件的转译（注：由于本人电脑只有 C 盘，因此并未对其他盘符做兼容处理）\n","wordCount":"651","inLanguage":"zh","datePublished":"2019-11-30T16:04:34+08:00","dateModified":"2019-11-30T16:04:34+08:00","author":{"@type":"Person","name":{"email":"batkiz@outlook.com","name":"Jinglue"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.batkiz.com/posts/using-wsl-nvim-in-powershell/"},"publisher":{"@type":"Organization","name":"not b@tk1z","logo":{"@type":"ImageObject","url":"https://blog.batkiz.com/favicon.ico"}}}</script><link rel=icon href=/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/favicon.ico><link rel=manifest href=/favicon.ico><link rel=preconnect href=https://fonts.loli.net><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.loli.net/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link href="https://fonts.loli.net/css2?family=Noto+Serif+SC&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link href="https://fonts.loli.net/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Noto+Serif+SC&family=Noto+Serif:ital,wght@0,100..900;1,100..900&display=swap" rel=stylesheet><link rel=stylesheet href=/css/main.min.28245603abfbc0a0a9ef30287c2872f82f0e6075e5b630bff570c8480b95b904.css integrity="sha256-KCRWA6v7wKCp7zAofChy+C8OYHXltjC/9XDISAuVuQQ=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>not b@tk1z
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/posts>文章</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/links>链接</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/atom.xml>RSS</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/about>关于</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/batkiz><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-social"><a class=navigation-link href=mailto:batkiz@outlook.com><svg viewBox="0 0 24 24" width="20" height="20" class="main-grid-item-icon" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>在 powershell 中无缝调用 wsl 中的 neovim</h1></header><p><small>2019年11月30日&nbsp;· 651 字&nbsp;· 2 分钟</small>
<small></small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#主要问题>主要问题</a></li><li><a href=#解决方案>解决方案</a></li><li><a href=#对代码的解释>对代码的解释</a></li><li><a href=#仍存在的问题>仍存在的问题</a></li></ul></nav></div><section class=blog-content><blockquote><p>注 1：neovim 亦可换为 vim</p></blockquote><blockquote><p>注 2：最新版本的 pwsh 脚本请<a href=https://blog.batkiz.com/posts/2020/some-pwsh-scripts/>点此获取</a></p></blockquote><p>在如今的 Windows 中，wsl 无疑能够极大提升我的开发体验。vim 则是任何人都绕不开的 TUI 编辑器。</p><p>不可否认，zsh/bash/fish 等 Linux 下的终端非常便捷好用，但我也是非常喜欢 powershell 的。在 <a href=/2019/09/24/oh-my-powershell/>之前的文章</a> 中，我对 powershell 进行了很多自定义配置，我也越来越离不开 powershell 了。</p><p>既然在我的 wsl 中我已经配好了 neovim，如果我再在 Windows 之上配置一份，无疑是多此一举。</p><p>那么该如何无缝调用呢？</p><h2 id=主要问题>主要问题</h2><ul><li>使用 <code>wsl nvim filename</code> 的话过于啰嗦</li><li>Windows 中如果使用自动补全路径，文件路径使用的 <code>\</code>，neovim 会将其识别为文件名的一部分</li></ul><h2 id=解决方案>解决方案</h2><p>话不多说，来看代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#66d9ef>function</span> vim {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>param</span>($fileName = <span style=color:#e6db74>&#39;.&#39;</span>)
</span></span><span style=display:flex><span>   wsl -e nvim $filename.Replace(<span style=color:#e6db74>&#39;\&#39;</span>,<span style=color:#e6db74>&#39;/&#39;</span>).Replace(<span style=color:#e6db74>&#39;C:&#39;</span>,<span style=color:#e6db74>&#39;/mnt/c&#39;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>将上面的代码写入 powershell 的配置文件保存（<code>notepad.exe $PROFILE</code>），之后新开一个 powershell 终端，就能无缝体验啦。</p><h2 id=对代码的解释>对代码的解释</h2><p>下面是解释。</p><p>第一行的 <code>function vim</code> 可以视为 Linux 之中的 alias，让我们每次在 powershell 中输入 vim 时，自动转换为下面的命令。</p><p>第二行的 <code>param($fileName = '.')</code> 则定义了 <code>vim</code> 所接收的参数，即要编辑的文件名。当未传入参数时，默认传入当前目录。</p><p>第三行的 <code>wsl -e nvim $filename.Replace('\','/')</code> 则是真正起作用的代码。<code>$filename.Replace('\','/')</code> 将 <code>\</code> 全部替换为 <code>/</code>，让 wsl 中的 neovim 能够识别我们真正要编辑的文件。<code>wsl -e nvim</code> 则是调用 wsl 中的 neovim 的命令，感兴趣的读者还可阅读 <code>wsl --help</code> 来查看更多用法。</p><h2 id=仍存在的问题>仍存在的问题</h2><ul><li><del>对所要编辑的文件只能使用相对路径，而不能是绝对路径</del>[solved]</li></ul><p>通过 <code>.Replace('C:','/mnt/c')</code> 将 C 盘的绝对路径转为 wsl 中的相对路径，可实现对绝对路径文件的转译（注：由于本人电脑只有 C 盘，因此并未对其他盘符做兼容处理）</p></section><div class=paginator><a class=prev href=https://blog.batkiz.com/posts/set-hugo-aliases-with-csharp/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>用 C# 设置 Hugo Aliases</span></a>
<a class=next href=https://blog.batkiz.com/posts/lets-roll-to-wsl2/><span>滚进 wsl2</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2025 <a href=https://blog.batkiz.com/>not b@tk1z</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "fd2a175921e640c8a40b873fb5e58aaa"}'></script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>